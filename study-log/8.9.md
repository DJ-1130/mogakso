# LG Aimers 해커톤 스터디 노트 — 식음업장 메뉴 수요 예측
**날짜:** 2025-08-09
**목표:** SMAPE **< 0.70** (룰 100% 준수)

---

## 1) 대회 핵심 룰 요약
- **입력 제약:** 각 평가 샘플은 **최근 28일**만 입력에 사용 가능.
- **출력:** 향후 **7일** 판매량 예측.
- **외부 데이터 금지:** 크롤링/오픈 API 불가. (요일·공휴일 등 **도메인지식**은 허용)
- **데이터 누출 방지:** 평가 입력 28일 외 **추가 lookback 금지**, 미래 정보 사용 금지.
- **평가 방식:** 업장 → 아이템 → 일자 순 **SMAPE 평균**, **실제=0인 날 제외**.
- **가중치 유의:** **담하/미라시아** 비중이 높아 성능 영향 큼.

---

## 2) 오늘 만든 베이스라인 개선안
- **모델:** 28→7 **멀티아웃풋 LSTM**
- **입력 피처:** 최근 28일 **수량(정규화)** + **요일 원-핫(7D)** → 총 8D
- **블렌딩:** LSTM 예측과 **같은 요일 중앙값(DOW-median)** **α-블렌딩**
- **포스트프로세싱:**
  - 음수 **→ 0**
  - 0 예측 **→ ε=1** (SMAPE 폭주 방지)
  - **상한 캡:** 28일창 **P99 × 1.2**
- **룰 적합:** 추론 시 **오직 28일 창**만 사용 (외부데이터·추가 lookback 없음)

---

## 3) 튜닝 & 검증
- **튜닝 홀드아웃:** train의 **마지막 (28→7)** 블록으로 `alpha/eps/cap_scale` 서치
- **업장별 파라미터:** 담하·미라시아 등 **업장 단위**로 α/ε/cap 선택
- **CV 전략:** 슬라이딩 윈도우(28→7)로 내부 점검
- **스케일 보정:** 업장 단위 **scale s ∈ [0.9,1.1]** (보수적 적용)

---

## 4) 이슈 & 해결
- **컬럼 불일치:** BOM/공백 제거, alias 매핑으로 `영업일자/영업장명_메뉴명/매출수량` 표준화
- **잘못된 train.csv 로딩:** 타이타닉 CSV 감지 → 해커톤 train.csv로 경로 교정
- **경로 안전화:** `./train.csv`, `./train/train.csv`, `/mnt/data/train.csv` 후보 탐색 + 필수 컬럼 검사

---

## 5) 실행 방법
```bash
# 자동 튠 + 예측 (권장)
python baseline_lstm_dev_28to7_tuned.py --epochs 30

# 튠 파라미터 재사용
python baseline_lstm_dev_28to7_tuned.py --params_in tuned_params.json
```
- 출력: **baseline_submission.csv**

---

## 6) 비고(설명 한 줄 예시)
> 최근 28일 입력, 7일 멀티출력 LSTM + 요일 One-hot, 같은 요일 중앙값 블렌딩, 포스트프로세싱(음수 클립·ε-floor·상한 캡), 외부데이터 미사용·룰 준수.

---

## 7) 다음 할 일 (빠른 점수 하락 루트)
- 담하/미라시아 **α·cap** 더 타이트 튠
- 에폭/히든차원 소폭 상향 후 **과적합 체크**
- 메뉴별 예측 분포 점검(과대 tail 컷) → SMAPE 안정화

